(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-train-unitlist"],{"0b33":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page-main unit-list"},[n("v-uni-view",{staticClass:"swiper-main"},[n("v-uni-swiper",{staticClass:"swiper-box swiper-slide-unit",attrs:{"indicator-dots":t.swiperleng?"true":"false",circular:"circular",interval:"interval",duration:"duration","indicator-color":"#E0E0E0","indicator-active-color":"#008CEE",current:t.swiperCurrent},on:{change:function(e){e=t.$handleEvent(e),t.swiperChange(e)}}},t._l(t.showList,function(e,i){return n("v-uni-swiper-item",{key:i,staticClass:"swiper-item"},[n("v-uni-view",{staticClass:"vli"},[n("v-uni-view",{staticClass:"vli2 train-swiper-main"},[e.media_type?t._e():n("v-uni-image",{staticClass:"slideImg",attrs:{"lazy-load":"true",src:e.original_src,mode:"aspectFill"},on:{click:function(e){e=t.$handleEvent(e),t.previewImage(e)}}}),"video"==e.media_type?n("v-uni-video",{staticClass:"train-video",attrs:{src:e.media_src,controls:""},on:{error:function(e){e=t.$handleEvent(e),t.videoErrorCallback(e)}}}):t._e(),"music"==e.media_type?n("v-uni-audio",{staticStyle:{"text-align":"left"},attrs:{src:e.media_src,name:e.name,author:"职照培训",action:"{method: 'pause'}",controls:"",poster:"https://img-cdn-qiniu.dcloud.net.cn/uniapp/audio/music.jpg"}}):t._e()],1)],1)],1)}),1)],1),n("v-uni-view",{staticClass:"uni-padding-wrap uni-common-mt segmented-box"},[n("uni-segmented-control",{attrs:{current:t.current,values:t.segmented,styleType:"text",activeColor:"#008CEE"},on:{clickItem:function(e){e=t.$handleEvent(e),t.onClicksegmented(e)}}})],1),n("v-uni-view",{staticClass:"unit-content"},[n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current === 0"}]},[n("v-uni-view",{staticClass:"course-lessions"},[n("v-uni-view",{staticClass:"course-inner"},[t._l(t.lessions,function(e,i){return[n("v-uni-view",{key:i+"_0",staticClass:"less-row",class:[i==t.lessActive?"less-active":""],on:{click:function(n){n=t.$handleEvent(n),t.getLessDtl(e.id,i)}}},[t._v(t._s(i+1)+"."+t._s(e.name))])]})],2)],1)],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}]},[n("v-uni-view",{staticClass:"course-detail-box"},[n("v-uni-view",{staticClass:"course-inner"},["content"===t.detailType?[n("v-uni-view",{staticClass:"course-title"},[t._v(t._s(t.data.name))]),n("v-uni-view",{staticClass:"course-more list-more"},[n("v-uni-view",[t._v("共"+t._s(t.lessTotal)+"门课程")])],1),n("v-uni-rich-text",{staticClass:"course-detail",attrs:{nodes:t.data.detail}})]:[n("v-uni-rich-text",{staticClass:"course-detail",attrs:{nodes:t.lessDtl.detail}})]],2)],1)],1)],1),n("fix-button",[t.canTest&&t.test_list?t._e():n("v-uni-view",{staticClass:"fbtns fbtns-clr-full btn-totest",class:t.isJoined?"is-joined":"",on:{click:function(e){e=t.$handleEvent(e),t.joinlearning(t.courseId)}}},[t._v(t._s(t.isJoinTxt))]),t.canTest&&t.test_list?n("v-uni-view",{staticClass:"fbtns fbtns-clr-full btn-totest",class:t.canTest&&t.test_list?"":"fbtn-disable",on:{click:function(e){e=t.$handleEvent(e),t.to_test(t.courseId)}}},[t._v("开始测试")]):t._e()],1)],1)},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},1918:function(t,e,n){"use strict";n.r(e);var i=n("c56a"),s=n("e7e8");for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);n("4482");var o=n("2877"),a=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,"0ef29eeb",null);e["default"]=a.exports},"23e5":function(t,e,n){"use strict";n.r(e);var i=n("d7a8"),s=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=s.a},2866:function(t,e,n){"use strict";n.r(e);var i=n("0b33"),s=n("b0ae");for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);n("6172");var o=n("2877"),a=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,"547cc6b8",null);e["default"]=a.exports},"2c17":function(t,e,n){var i=n("a1a1");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n("4f06").default;s("26dfb762",i,!0,{sourceMap:!1,shadowMode:!1})},4482:function(t,e,n){"use strict";var i=n("6b2c"),s=n.n(i);s.a},6172:function(t,e,n){"use strict";var i=n("2c17"),s=n.n(i);s.a},"6b1d":function(t,e,n){"use strict";n.r(e);var i=n("c976"),s=n("23e5");for(var r in s)"default"!==r&&function(t){n.d(e,t,function(){return s[t]})}(r);var o=n("2877"),a=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,"88554764",null);e["default"]=a.exports},"6b2c":function(t,e,n){var i=n("cfe4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=n("4f06").default;s("60bf2bd2",i,!0,{sourceMap:!1,shadowMode:!1})},"732c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"segmented-control",props:{current:{type:Number,default:0},values:{type:Array,default:function(){return[]}},activeColor:{type:String,default:"#007aff"},styleType:{type:String,default:"button"}},data:function(){return{currentIndex:this.current}},watch:{current:function(t){t!==this.currentIndex&&(this.currentIndex=t)}},computed:{wrapStyle:function(){var t="";switch(this.styleType){case"text":t="border:0;";break;default:t="border-color: ".concat(this.activeColor);break}return t},itemStyle:function(){var t="";switch(this.styleType){case"text":t="color:#000;border-left:0;";break;default:t="color:".concat(this.activeColor,";border-color:").concat(this.activeColor,";");break}return t},activeStyle:function(){var t="";switch(this.styleType){case"text":t="color:".concat(this.activeColor,";border-left:0;border-bottom-style:solid;");break;default:t="color:#fff;border-color:".concat(this.activeColor,";background-color:").concat(this.activeColor);break}return t}},methods:{onClick:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.$emit("clickItem",t))}}};e.default=i},"812c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("6b1d")),s=r(n("1918"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return l(t)||c(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var u={data:function(){return{__token:"",courseId:"",data:[],lessions:[],lessTotal:"",lessDtl:[],cover:[],detailType:"",showList:[],swiperList:[],swiperCurrent:0,lessActive:-1,lessDefaultActive:0,isJoined:!1,isJoinTxt:"加入学习",current:0,segmented:["课程目录","内容"],canTest:!1,test_list:!1}},onLoad:function(t){var e=this;e.courseId=t.id,e.$store.dispatch("cheack_user"),e.__token=e.$store.state.user.token,e.cheackTestLng(),e.pageInit()},onShow:function(){},onReady:function(t){},onPullDownRefresh:function(){var t=this;t.pageInit()},components:{fixButton:i.default,uniSegmentedControl:s.default},computed:{swiperleng:function(){return this.swiperList.length}},methods:{pageInit:function(){var t=this,e={inter:"course",parm:"?course_id=".concat(t.courseId),header:{token:t.__token},fun:function(e){if(uni.stopPullDownRefresh(),e.success){var n=e.data;n["detail"]=n["detail"].replace(/\<img/gi,'<img style="max-width:100%;height:auto" '),t.data=n,t.isJoined="1"==n.ucStatus||"2"==n.ucStatus,t.test_list?t.isJoinTxt="1"==n.ucStatus?"学习完成后开启测试":"加入学习":t.isJoinTxt="1"==n.ucStatus?"已加入学习":"加入学习",n.lessonCount==n.lessonStartCount&&"0"!=n.lessonCount&&"0"!=n.lessonStartCount&&(t.canTest=!0);var i=[{original_src:e.data.original_src||"/img/logo.png"}];t.showList=i,t.swiperList=i}}};t.$store.dispatch("getData",e);var n={inter:"lessons",parm:"?course_id=".concat(t.courseId),header:{token:t.__token},fun:function(e){if(uni.stopPullDownRefresh(),e.success){t.lessions=e.data.list,t.lessTotal=e.data.total;t.lessDefaultActive}}};t.$store.dispatch("getData",n)},getLessDtl:function(t,e){var n=this;if(console.log(t,e),n.detailType=t,n.current=1,e!=n.lessActive){if("content"==t&&-1==e)return n.lessActive=e,n.swiperList=[{original_src:n.data.original_src||"/img/logo.png"}],void(n.showList=[{original_src:n.data.original_src||"/img/logo.png"}]);var i={inter:"lesson",parm:"?lesson_id=".concat(t),header:{token:n.__token},fun:function(i){n.swiperCurrent=0,n.lessActive=e,n.current=1;var s={inter:"accountLesson",data:{lesson_id:t},method:"POST",header:{"Content-Type":"application/json",token:n.__token},fun:function(t){t.success}};if(n.$store.dispatch("getData",s),i.success){var r=i.data;r["detail"]=r["detail"].replace(/\<img/gi,'<img style="max-width:100%;height:auto" '),n.lessDtl=r;var a=r.images?r.images:[];if(r.src&&r.type){var c={name:r.name,media_type:r.type,media_src:r.src};a.push(c)}if(a){var l=a.filter(function(t,e){return!t.media_type}),u=a.filter(function(t,e){return t.media_type});console.log("filter_media:",u),l&&u?n.showList=[].concat(o(l),o(u)):l&&!u?n.showList=o(l):!l&&u&&(n.showList=o(u)),n.swiperList=a}}}};n.$store.dispatch("getData",i)}},onClicksegmented:function(t){this.current!==t&&(this.current=t)},previewImage:function(){var t=this,e=t.swiperCurrent,n=t.swiperList,i=n.filter(function(t){return!t.media_type}),s=i.map(function(t){return t.original_src}),r={urls:s,indicator:"number",current:e};console.log(r),uni.previewImage(r)},videoErrorCallback:function(t){uni.showModal({content:t.target.errMsg,showCancel:!1})},swiperChange:function(t){var e=this;e.swiperCurrent=t.detail.current},joinlearning:function(t){var e=this;if(!e.isJoined){var n={inter:"accountCourse",data:{course_id:t},method:"POST",header:{"Content-Type":"application/json",token:e.__token},fun:function(t){t.success&&(e.isJoined=!0,e.isJoinTxt="学习完成后开启测试")}};e.$store.dispatch("getData",n)}},to_test:function(t){var e=this;e.canTest?e.test_list?uni.navigateTo({url:"/pages/train/test?course_id=".concat(t)}):uni.showModal({content:"该课程暂无试题库！",showCancel:!1}):uni.showModal({content:"学习完成当前课程方可测试！",showCancel:!1})},cheackTestLng:function(){var t=this,e={inter:"tests",parm:"?course_id=".concat(t.courseId),header:{token:t.__token},fun:function(e){e.success&&(t.test_list=e.data.list)}};t.$store.dispatch("getData",e)}}};e.default=u},a1a1:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".swiper-main[data-v-547cc6b8]{position:relative}.photo-album[data-v-547cc6b8]{position:absolute;right:%?20?%;top:%?80?%;z-index:3;padding:%?20?%}.swiper-slide-unit[data-v-547cc6b8]{height:%?422?%}.segmented-box[data-v-547cc6b8]{border-bottom:%?2?% solid #d1d1d1}.unit-content[data-v-547cc6b8]{padding-bottom:%?30?%}.course-inner[data-v-547cc6b8]{padding:%?30?%}.is-joined[data-v-547cc6b8]{background:#929292;color:#fff;border-color:#929292}.course-detail-box[data-v-547cc6b8]{border-bottom:%?20?% solid #f4f4f4}.course-detail-box[data-v-547cc6b8]:last-child{border-bottom:none}.less-active[data-v-547cc6b8]{color:#008cee}.train-swiper-main[data-v-547cc6b8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}",""])},b0ae:function(t,e,n){"use strict";n.r(e);var i=n("812c"),s=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=s.a},c56a:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"segmented-control",class:t.styleType,style:t.wrapStyle},t._l(t.values,function(e,i){return n("v-uni-view",{key:i,staticClass:"segmented-control-item",class:t.styleType,style:i===t.currentIndex?t.activeStyle:t.itemStyle,on:{click:function(e){e=t.$handleEvent(e),t.onClick(i)}}},[t._v(t._s(e))])}),1)},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},c976:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"fix-button",style:"position:"+t.isFixed},[n("v-uni-view",{staticClass:"fbtn-main"},["show"==t.gobackShow?n("v-uni-view",{staticClass:"fbtns btn-goback",class:t.btnType,on:{click:function(e){e=t.$handleEvent(e),t.$store.dispatch("goback")}}},[t._v("返回")]):t._e(),t._t("default")],2)],1)},s=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},cfe4:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".segmented-control[data-v-0ef29eeb]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:75%;font-size:%?32?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 auto;overflow:hidden}.segmented-control.button[data-v-0ef29eeb]{border:%?2?% solid}.segmented-control.text[data-v-0ef29eeb]{border:0;-webkit-border-radius:%?0?%;border-radius:%?0?%}.segmented-control-item[data-v-0ef29eeb]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:center;line-height:%?60?%;-webkit-box-sizing:border-box;box-sizing:border-box}.segmented-control-item.button[data-v-0ef29eeb]{border-left:%?1?% solid}.segmented-control-item.text[data-v-0ef29eeb]{border-left:0}.segmented-control-item[data-v-0ef29eeb]:first-child{border-left-width:0}",""])},d7a8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"fix-button",props:{btnType:{type:String,default:""},gobackShow:{type:String,default:"show"},isFixed:{type:String,default:"fixed"}},data:function(){return{}},computed:{},methods:{}};e.default=i},e7e8:function(t,e,n){"use strict";n.r(e);var i=n("732c"),s=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=s.a}}]);